!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("utility-functions",[],r):"object"==typeof exports?exports["utility-functions"]=r():n["utility-functions"]=r()}(window,(function(){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var u in n)t.d(e,u,function(r){return n[r]}.bind(null,u));return e},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=0)}([function(n,r,t){"use strict";var e=this&&this.__spreadArrays||function(){for(var n=0,r=0,t=arguments.length;r<t;r++)n+=arguments[r].length;var e=Array(n),u=0;for(r=0;r<t;r++)for(var o=arguments[r],i=0,f=o.length;i<f;i++,u++)e[u]=o[i];return e};function u(n){return function(r){return n}}function o(n){return function(r){return r.map(n)}}function i(n){return function(r){return r.map((function(r,t){return n(r)(t)}))}}function f(n){return function(r){var t;return(t={})[n]=r,t}}function c(n){return function(r){return Array.apply(null,Array(r-n)).map((function(r,t){return n+t}))}}function a(n){return function(r){return Math.floor(Math.random()*r)+n}}Object.defineProperty(r,"__esModule",{value:!0}),r.dropFirst=function(n){return n.slice(1)},r.dropLast=function(n){return n.slice(0,n.length-1)},r.id=function(n){return n},r.keep=u,r.map=o,r.mapi=i,r.adjust=function(n){return function(r){return function(t){return i((function(t){return function(e){return e===n?r(t):t}}))(t)}}},r.merge=function(n){var r=Array.isArray(n)?[]:{};return function(t){return Object.assign(r,n,t)}},r.mod=function(n){return function(r){return(r%n+n)%n}},r.objOf=f,r.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return function(r){return e(n).reduce((function(n,r){return r(n)}),r)}},r.prop=function(n){return function(r){return r[n]}},r.range=c,r.repeat=function(n){return function(r){return o(u(n))(c(0)(r))}},r.randomInt=a,r.random=function(n){if(Array.isArray(n))return n[a(0)(n.length)];if("number"==typeof n)return function(r){return Math.random()*r+n};throw Error("Incompatible parameter type: "+typeof n)},r.spec=function(n){return function(r){return Object.keys(n).map((function(t){return f(t)(n[t](r))})).reduce((function(n,r){return Object.assign(n,r)}))}},r.mapRange=function(n){return function(r,t){return function(e,u){return(n-r)*(u-e)/(t-r)+e}}}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91dGlsaXR5LWZ1bmN0aW9ucy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vdXRpbGl0eS1mdW5jdGlvbnMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdXRpbGl0eS1mdW5jdGlvbnMvLi9zcmMvdXRpbGl0eS1mdW5jdGlvbnMudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImtlZXAiLCJ4IiwiXyIsIm1hcCIsImYiLCJ4cyIsIm1hcGkiLCJpbmRleCIsIm9iak9mIiwidiIsInJhbmdlIiwiQXJyYXkiLCJhcHBseSIsInJhbmRvbUludCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNsaWNlIiwibGVuZ3RoIiwiYmFzZSIsImlzQXJyYXkiLCJvdGhlciIsImFzc2lnbiIsInkiLCJmbnMiLCJyZWR1Y2UiLCJhY2MiLCJwYXJhbTEiLCJFcnJvciIsImZuT2JqIiwia2V5cyIsIm9iaiIsIm1hcFJhbmdlIiwiaV9zdGFydCIsImlfZW5kIiwib19zdGFydCIsIm9fZW5kIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNB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QW1CdkQsZ0JBQWdERSxHQU85QyxPQUFPLFNBQUM5QixHQUNOLE9BQUF2QixPQUFPc0QsS0FBS0QsR0FDVDVCLEtBQUksU0FBQVosR0FBTyxPQUFBaUIsRUFBU2pCLEVBQVRpQixDQUFjdUIsRUFBTXhDLEdBQUtVLE9BQ3BDMEIsUUFBTyxTQUFDQyxFQUFLSyxHQUFRLE9BQUF2RCxPQUFPOEMsT0FBT0ksRUFBS0ssUUFPbEMsRUFBQUMsU0FBVyxTQUFDakMsR0FBYyxnQkFBQ2tDLEVBQWlCQyxHQUFrQixnQkFDekVDLEVBQ0FDLEdBQ0csT0FBRXJDLEVBQUlrQyxJQUFZRyxFQUFRRCxJQUFhRCxFQUFRRCxHQUFXRSIsImZpbGUiOiJ1dGlsaXR5LWZ1bmN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwidXRpbGl0eS1mdW5jdGlvbnNcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1widXRpbGl0eS1mdW5jdGlvbnNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widXRpbGl0eS1mdW5jdGlvbnNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuICogUmVtb3ZlcyB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS5cbiAqIEBwYXJhbSB4cyAtIGFuIGFycmF5XG4gKiBAcmV0dXJucyBBIGNvcHkgb2YgdGhlIGB4c2AgYXJyYXkgd2l0aCB0aGUgZmlyc3QgZWxlbWVudCByZW1vdmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcm9wRmlyc3Q8VD4oeHM6IFRbXSk6IFRbXSB7XG4gIHJldHVybiB4cy5zbGljZSgxKTtcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICogQHBhcmFtIHhzIC0gYW4gYXJyYXlcbiAqIEByZXR1cm5zIEEgY29weSBvZiB0aGUgYHhzYCBhcnJheSB3aXRoIHRoZSBsYXN0IGVsZW1lbnQgcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJvcExhc3Q8VD4oeHM6IFRbXSk6IFRbXSB7XG4gIHJldHVybiB4cy5zbGljZSgwLCB4cy5sZW5ndGggLSAxKTtcbn1cbi8qKlxuICogQW4gaWRlbnRpdHkgZnVuY3Rpb24uXG4gKiBAcGFyYW0geCAtIGFuIG9iamVjdFxuICogQHJldHVybnMgYHhgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZDxUPih4OiBUKTogVCB7XG4gIHJldHVybiB4O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBhcmd1bWVudC5cbiAqIEBwYXJhbSB4IC0gYW4gb2JqZWN0XG4gKiBAcmV0dXJucyAoXykgPT4gYHhgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBrZWVwPFQ+KHg6IFQpOiAoXzogYW55KSA9PiBUIHtcbiAgcmV0dXJuIChfOiBhbnkpID0+IHg7XG59XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICogQHBhcmFtIGYgLSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB2YWx1ZVxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHdpbGwgY2FsbCBgZmAgb24gZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXA8UywgVD4oZjogKHg6IFMpID0+IFQpOiAoeHM6IFNbXSkgPT4gVFtdIHtcbiAgcmV0dXJuICh4czogU1tdKSA9PiB4cy5tYXAoZik7XG59XG4vKipcbiAqIEFwcGx5IGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5IHdpdGggYW4gaW5kZXguXG4gKiBAcGFyYW0gZiAtIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHZhbHVlIGFuZCByZXR1cm5zIGZ1bmN0aW9uIG9uIGFuIGluZGV4XG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBjYWxsIGBmYCBvbiBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcGk8UywgVD4oZjogKHg6IFMpID0+IChpOiBudW1iZXIpID0+IFQpOiAoeHM6IFNbXSkgPT4gVFtdIHtcbiAgcmV0dXJuICh4czogU1tdKSA9PiB4cy5tYXAoKHZhbHVlOiBTLCBpbmRleDogbnVtYmVyKSA9PiBmKHZhbHVlKShpbmRleCkpO1xufVxuLyoqXG4gKiBBcHBseSBhIGZ1bmN0aW9uIHRvIHRoZSBudGggZWxlbWVudCBvZiBhbiBhcnJheS5cbiAqIEBwYXJhbSBuIC0gdGhlIGVsZW1lbnQgdG8gYXBwbHkgdGhlIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJucyBBIG1hcHBpbmcgZnVuY3Rpb24gdGhhdCB3aWxsIGFwcGx5IGEgZnVuY3Rpb24gdG8gdGhlIGBuYCBlbGVtZW50IG9mIGFuIGFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGp1c3Q8UywgVD4oXG4gIG46IG51bWJlclxuKTogKGY6ICh4OiBTKSA9PiBUKSA9PiAoeHM6IFNbXSkgPT4gQXJyYXk8UyB8IFQ+IHtcbiAgcmV0dXJuIChmOiAoeDogUykgPT4gVCkgPT4gKHhzOiBTW10pID0+XG4gICAgbWFwaSgoeDogUykgPT4gKGk6IG51bWJlcikgPT4gKGkgPT09IG4gPyBmKHgpIDogeCkpKHhzKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydGllcyBvZiBvbmUgb2JqZWN0IG1lcmdlZCBpbnRvIGFub3RoZXIuXG4gKiBAcGFyYW0gYmFzZSAtIHRoZSBiYXNlIG9iamVjdCB0aGF0IHByb3ZpZGVzIGRlZmF1bHQgdmFsdWVzXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYW5vdGhlciBvYmplY3QsIGBvdGhlcmAsIGZvciB0aGUgcHJvcGVydHkgbWVyZ2UuXG4gKiBUaGUgcHJvcGVydGllcyBvZiBgb3RoZXJgIHdpbGwgb3ZlcndyaXRlIHRoZSBwcm9wZXJ0aWVzIG9mIGBvYmpgIGluIHRoZSBuZXcgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYmFzZTogYW55KTogKG90aGVyOiBhbnkpID0+IGFueTtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShiYXNlOiBhbnlbXSk6IChvdGhlcjogYW55W10pID0+IGFueVtdO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKGJhc2U6IGFueSk6IChvdGhlcjogYW55KSA9PiBhbnkge1xuICBjb25zdCByb290ID0gQXJyYXkuaXNBcnJheShiYXNlKSA/IFtdIDoge307XG4gIHJldHVybiAob3RoZXI6IGFueSkgPT4gT2JqZWN0LmFzc2lnbihyb290LCBiYXNlLCBvdGhlcik7XG59XG4vKipcbiAqIEEgbW9kdWx1cyBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgbmVnYXRpdmUgdmFsdWVzLCBlLmcuIG1vZCgyKSgxKSA9PT0gMSAmJiBtb2QoMikoLTEpID09PSAxLlxuICogQHBhcmFtIG4gLSB0aGUgZGl2c29yLCBlLmcuIG1vZChuKSh4KSA9PT0geCBtb2QgblxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIHRoZSBkaXZpZGVuZCBmb3IgdGhlIG1vZHVsdXMgY2FsY3V0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb2QobjogbnVtYmVyKTogKHg6IG51bWJlcikgPT4gbnVtYmVyIHtcbiAgcmV0dXJuICh5OiBudW1iZXIpID0+ICgoeSAlIG4pICsgbikgJSBuO1xufVxuLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gKiBAcGFyYW0ga2V5IC0gdGhlIHZhbHVlIGZvciB0aGUgb2JqZWN0IGtleVxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHJlY2lldmVzIGEgYHZhbHVlYCBhbmQgcmV0dXJucyBhbiBvYmplY3Qgb2YgeyBga2V5YDogYHZhbHVlYCB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvYmpPZjxWPihcbiAga2V5OiBzdHJpbmdcbik6IChcbiAgdjogVlxuKSA9PiB7XG4gIFt4OiBzdHJpbmddOiBWO1xufSB7XG4gIHJldHVybiAodjogVikgPT4gKHsgW2tleV06IHYgfSk7XG59XG4vKipcbiAqIEFwcGxpZXMgYSBzZXQgb2YgZnVuY3Rpb25zIHRvIGFuIGFyZ3VtZW50LlxuICogQHBhcmFtIGZucyAtIG11bHRpcGxlIGZ1bmN0aW9uIGFyZ3VtZW50c1xuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYXBwbHkgYGZuc2AgdG8gYW4gYXJndW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGU8Vj4oLi4uZm5zOiBBcnJheTwoeDogVikgPT4gVj4pOiAoeDogVikgPT4gViB7XG4gIHJldHVybiAoeDogVikgPT4gWy4uLmZuc10ucmVkdWNlKChhY2MsIGYpID0+IGYoYWNjKSwgeCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0byByZXR1cm4gYW4gb2JqZWN0J3MgcHJvcGVydHkgdmFsdWVcbiAqIEBwYXJhbSBrZXkgLSB0aGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byByZXR1cm5cbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkncyB2YWx1ZSBmb3IgYSByZWNlaXZlZCBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3A8VD4oa2V5OiBzdHJpbmcgfCBudW1iZXIpOiAobzogeyBbeDogc3RyaW5nXTogVCB9KSA9PiBUIHtcbiAgcmV0dXJuIChvOiB7IFt4OiBzdHJpbmddOiBUIH0pID0+IG9ba2V5XTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbnRlZ2VycyBmcm9tIGBuYCB0byBgbWAuXG4gKiBFeDogcmFuZ2UoMCkoMikgPT09IFswLCAxXVxuICogQHBhcmFtIG4gLSB0aGUgbG93ZXIgYm91bmQgZm9yIHRoZSByYW5nZVxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIHRoZSB1cHBlciBib3VuZCAoZXhjbHVzaXZlKSBmb3IgdGhlIHJhbmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5nZShuOiBudW1iZXIpOiAobTogbnVtYmVyKSA9PiBudW1iZXJbXSB7XG4gIHJldHVybiAobTogbnVtYmVyKSA9PlxuICAgIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KG0gLSBuKSkubWFwKChfOiBhbnksIGk6IG51bWJlcikgPT4gbiArIGkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IHdpdGggYSB2YWx1ZSBgY2AgcmVwZWF0ZWQgYG5gIHRpbWVzLlxuICogQHBhcmFtIGMgLSB0aGUgdmFsdWUgdG8gcmVwZWF0XG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYG5gIHRvIHJlcGVhdCB2YWx1ZSBgY2BcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGVhdDxUPihjOiBUKTogKG46IG51bWJlcikgPT4gVFtdIHtcbiAgcmV0dXJuIChuOiBudW1iZXIpID0+IG1hcChrZWVwKGMpKShyYW5nZSgwKShuKSk7XG59XG4vKipcbiAqIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBmcm9tIGBtaW5gIHRvIGBtYXhgIChleGNsdXNpdmUpXG4gKiBAcGFyYW0gbWluIC0gdGhlIG1pbmltdW0gdmFsdWVcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBgbWF4YFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSW50KG1pbjogbnVtYmVyKTogKG1heDogbnVtYmVyKSA9PiBudW1iZXIge1xuICByZXR1cm4gKG1heDogbnVtYmVyKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpICsgbWluO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgcmFuZG9tIG51bWJlciBmcm9tIGBtaW5gIHRvIGBtYXhgIChleGNsdXNpdmUpXG4gKiBAcGFyYW0gbWluIC0gdGhlIG1pbmltdW0gdmFsdWVcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBgbWF4YFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG1pbjogbnVtYmVyKTogKG1heDogbnVtYmVyKSA9PiBudW1iZXI7XG4vKipcbiAqIFJldHVybnMgYSByYW5kb20gZWxlbWVudCBmcm9tIGFuIGFycmF5XG4gKiBAcGFyYW0gYXJyYXkgLSB0aGUgYXJyYXkgdmFsdWVcbiAqIEByZXR1cm5zIEEgcmFuZG9tIGVsZW1lbnQgZnJvbSBgYXJyYXlgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb208VD4oYXJyYXk6IFRbXSk6IFQ7XG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tPFQ+KHBhcmFtMTogVFtdIHwgbnVtYmVyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHBhcmFtMSkpIHtcbiAgICByZXR1cm4gcGFyYW0xW3JhbmRvbUludCgwKShwYXJhbTEubGVuZ3RoKV07XG4gIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtMSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gKG1heDogbnVtYmVyKSA9PiBNYXRoLnJhbmRvbSgpICogbWF4ICsgcGFyYW0xO1xuICB9XG4gIHRocm93IEVycm9yKCdJbmNvbXBhdGlibGUgcGFyYW1ldGVyIHR5cGU6ICcgKyB0eXBlb2YgcGFyYW0xKTtcbn1cbi8qKlxuICogQ3JlYXRlIGFuIG9iamVjdCBmcm9tIGEgbWFwcGluZyBvZiBmdW5jdGlvbnNcbiAqXG4gKiBFeDpcbiAqXG4gKiBjb25zdCBmbk9iaiA9IHtcbiAqICAgIGFkZE9uZTogKHgpID0+IHggKyAxLFxuICogICAgbWludXNPbmU6ICh4KSA9PiB4IC0gMVxuICogfTtcbiAqXG4gKiBjb25zdCB4ID0gMTtcbiAqXG4gKiBzcGVjKGZPYmopKHgpID09PSB7IGFkZE9uZTogMiwgbWludXNPbmU6IDAgfVxuICpcbiAqIEBwYXJhbSBmbk9iaiAtIGEgbWFwcGluZyBvZiBmdW5jdGlvbnNcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhbiBvYmplY3QgdG8gd2hpY2ggdGhlIGZ1bmN0aW9ucyBhcmUgYXBwbGllZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BlYzxGIGV4dGVuZHMgKHY6IGFueSkgPT4gYW55Pihmbk9iajoge1xuICBbcDogc3RyaW5nXTogRjtcbn0pOiAoXG4gIHg6IGFueVxuKSA9PiB7XG4gIFt4OiBzdHJpbmddOiBhbnk7XG59IHtcbiAgcmV0dXJuICh4OiBhbnkpID0+XG4gICAgT2JqZWN0LmtleXMoZm5PYmopXG4gICAgICAubWFwKGtleSA9PiBvYmpPZjxGPihrZXkpKGZuT2JqW2tleV0oeCkpKVxuICAgICAgLnJlZHVjZSgoYWNjLCBvYmopID0+IE9iamVjdC5hc3NpZ24oYWNjLCBvYmopKTtcbn1cbi8qKlxuICogTWFwcyBhIHZhbHVlIGB4YCBmcm9tIGFuIGlucHV0IHJhbmdlIHRvIGFuIG91dHB1dCByYW5nZVxuICogQHBhcmFtIHggLSB0aGUgdmFsdWUgdG8gbWFwXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYW4gaW5wdXQgcmFuZ2UgYW5kIHRoZW4gYW4gb3V0cHV0IHJhbmdlXG4gKi9cbmV4cG9ydCBjb25zdCBtYXBSYW5nZSA9ICh4OiBudW1iZXIpID0+IChpX3N0YXJ0OiBudW1iZXIsIGlfZW5kOiBudW1iZXIpID0+IChcbiAgb19zdGFydDogbnVtYmVyLFxuICBvX2VuZDogbnVtYmVyXG4pID0+ICgoeCAtIGlfc3RhcnQpICogKG9fZW5kIC0gb19zdGFydCkpIC8gKGlfZW5kIC0gaV9zdGFydCkgKyBvX3N0YXJ0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==